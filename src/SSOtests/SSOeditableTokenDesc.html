<html>
    <head>
        <script src="http://cdn.kendostatic.com/2014.3.1316/js/jquery.min.js"></script>
        <script src="C:\Users\aestrada\Documents\GitHub\JSDO\src\progress.util.js"></script>
        <script src="C:\Users\aestrada\Documents\GitHub\JSDO\src\progress.js"></script>
        <script src="C:\Users\aestrada\Documents\GitHub\JSDO\src\progress.session.js"></script>
        <script src="C:\Users\aestrada\Documents\GitHub\JSDO\src\progress.auth.js"></script>	
        
    </head>

    <body>
        <br/>
        <br/>
        TEST OUTPUT
        <br/>

        <script type="text/javascript">
            // These are tests for the story TP 38665 where we're preventing
            // the editing of the tokenRequest/ResponseDescriptors.
                        
            // Original success case
            try {
                document.write("<br/><br/>Successful AuthProvider Check: <br/>");
                var auth = new progress.data.AuthenticationProvider(
                    //"http://localhost:8810/TS102/static/auth/j_spring_security_check",
                    "http://nbbedaestrada:8810/TS102/static/auth/j_spring_security_check"
                );
                
                auth.authenticate({ userName: "restuser", password: "password"})
                    .done(function (ap, result, info) {
                    console.log("authenticate method succeeded");
                
                })
                .fail(function (ap, result, info) {
                    console.log("authenticate method failed");
                });
                
            } catch (e) {
                console.log("Failure: " + e);
            } finally {
                // If this succeeds, our provider should be authenticated
                // Weird thing, it fails the first time? Even though we are
                // authenticated?
                if (auth && auth.isAuthenticated()) {
                    document.write("Success: we're authenticated!");
                }
                else  {
                    document.write("Failure: We didn't authenticate!");
                }
            }
            
            // There should be no tokenResponseDescriptor!
            try {
                document.write("<br/><br/>Editing of TokenResponseDescriptor Check: <br/>")
                var test = new progress.data.AuthenticationProvider(
                    "hello yolo"
                );

                if (typeof test.tokenResponseDescriptor === "undefined") {
                    document.writeln("Success: There is no tokenResponseDescriptor!");
                } else {
                    document.writeln("Failure: There is a tokenResponseDescriptor!");
                }
            } catch (e) {
                document.write("Exception: " + e);
            }
            
            
        </script> 
    </body>
</html>